## 项目简介
本项目是基于CH224K快充协议芯片与STC8G1K08A单片机，实现一键切换电压，锁定当前电压，上电自动引出上次使用电压（该功能可以关闭）

## 项目功能
本设计是基于STC8G1K08A单片机设计的便捷电压引出模块；设置有一个独立按键，一个锁定开关，按下按键可一键切换电压，锁定开关打开后可锁定当前电压，防止误触导致电压变化，保护用电设备；

## 项目参数
* 本设计采用STC8G1K08A单片机，在掉电情况下仍能保存上次数据；
* 选用CH224K快充协议芯片，可以引出5种常用电压，分别为5V、9V、12V、15V、20V；
* 可搭配0.28寸超小电压表实时显示当前电压；

## 原理解析（硬件说明）
本项目由以下部分组成，电源部分、LED指示灯部分、主控部分、快充协议部分，本项目主要是通过按钮控制单片机输出不同信号给快充协议芯片，从而实现引出不同的电压。

![2.png](//image.lceda.cn/oshwhub/896049d4bd7440f59cbdde7141086063.png)
电源电路：
采用TYPE-C-16P接口作为供电接口，同时使用HT7113作为3.3V供电，。

![3.png](//image.lceda.cn/oshwhub/7aae8c3d62a84e87aa948b81d6e2ad35.png)
LED指示灯电路：
使用74HC138芯片作为LED控制芯片，可将3路信号分离为8路信号，节省单片机IO引脚，也因使用了74HC138芯片，保证了正常情况下同一时间只会亮一个LED电压指示灯。


![5.png](//image.lceda.cn/oshwhub/e68a9dfdc8b14a52a58d707127845937.png)
主控电路：
使用STC8G1K08A单片机，该单片机仅有8个引脚，在不浪费单片机资源的同时降低了成本，3个IO作为快充协议芯片的信号的同时也作为LED电压指示的信号，1个IO作为模式切换按键的信号输入，剩下两个IO作为单片机的程序烧录预留口。

![4.png](//image.lceda.cn/oshwhub/7af16feaaa1149c6b5a6b46e920509ad.png)
快充协议电路：
使用CH224K快充协议芯片，该处电路与官方建议电路有所出入，官方电路使用电阻分压，但是在高电压（15V、20V）下，电阻发热严重，参考芯片手册，选择使用电源电路中的HT7113供电。
## 嘉立创开源连接
https://oshwhub.com/feiye_mc/kuai-chong-you-pian-type-c-zhuan-xt60
